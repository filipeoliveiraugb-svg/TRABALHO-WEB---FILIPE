<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Gerenciamento da Farm√°cia</title>
    <!-- Carregamento do Tailwind CSS para estiliza√ß√£o moderna e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configura√ß√£o do Tailwind (Define fonte e paleta de cores) -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary-pharma': '#10B981', // Verde suave para farm√°cia (Emerald 500)
                        'secondary-pharma': '#1F2937', // Cinza escuro
                        'accent-blue': '#3B82F6', // Azul para a√ß√µes de informa√ß√£o
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50 font-sans text-secondary-pharma">

    <!-- Custom Modal for Actions/Alerts (Substitui o alert/confirm nativo) -->
    <div id="customModal" class="fixed inset-0 bg-gray-900 bg-opacity-60 hidden items-center justify-center p-4 z-50 transition-opacity duration-300 opacity-0" onclick="hideModal()">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-sm m-4 transform transition-all duration-300 scale-95" onclick="event.stopPropagation()">
            <div class="p-6">
                <h3 id="modalTitle" class="text-xl font-bold mb-3 text-primary-pharma">T√≠tulo</h3>
                <p id="modalMessage" class="text-gray-600 mb-6 border-l-2 border-primary-pharma pl-3">Mensagem</p>
                <div id="modalActions" class="flex justify-end space-x-3">
                    <!-- Bot√µes injetados via JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Conte√∫do Principal do Painel -->
    <div class="container mx-auto p-4 sm:p-8 max-w-6xl">
        <!-- Cabe√ßalho de Boas-Vindas -->
        <header class="text-center mb-10 p-6 bg-white shadow-xl rounded-2xl">
            <h1 class="text-4xl font-extrabold text-secondary-pharma">Bem-vindo √† Farm√°cia Online</h1>
            <p class="text-lg text-gray-500 mt-2">Gerencie seus medicamentos, vendas e estoque de forma pr√°tica e r√°pida.</p>
        </header>

        <!-- Cart√µes de Navega√ß√£o Principal -->
        <!-- Substitu√≠do 'a href' por 'button onclick' para funcionalidade SPA -->
        <section class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">

            <!-- Card Medicamentos -->
            <button id="btn-medicamentos" onclick="renderContent('medicamentos')" class="flex flex-col h-full bg-white shadow-md rounded-xl p-5 transition duration-200 hover:shadow-lg hover:ring-2 hover:ring-primary-pharma/70 transform hover:scale-[1.01] text-center card-button">
                <span class="text-3xl mb-1">üíä</span>
                <h5 class="text-lg font-bold">Medicamentos</h5>
                <p class="text-gray-500 text-xs mt-1">Cat√°logo e Pre√ßos</p>
            </button>

            <!-- Card Clientes (Novo) -->
            <button id="btn-clientes" onclick="renderContent('clientes')" class="flex flex-col h-full bg-white shadow-md rounded-xl p-5 transition duration-200 hover:shadow-lg hover:ring-2 hover:ring-accent-blue/70 transform hover:scale-[1.01] text-center card-button">
                <span class="text-3xl mb-1 text-accent-blue">üßë‚Äçü§ù‚Äçüßë</span>
                <h5 class="text-lg font-bold">Clientes</h5>
                <p class="text-gray-500 text-xs mt-1">Gerenciamento e Hist√≥rico</p>
            </button>

            <!-- Card Vendas -->
            <button id="btn-vendas" onclick="renderContent('vendas')" class="flex flex-col h-full bg-white shadow-md rounded-xl p-5 transition duration-200 hover:shadow-lg hover:ring-2 hover:ring-green-500/70 transform hover:scale-[1.01] text-center card-button">
                <span class="text-3xl mb-1 text-green-500">üí∞</span>
                <h5 class="text-lg font-bold">Vendas</h5>
                <p class="text-gray-500 text-xs mt-1">Relat√≥rios e Transa√ß√µes</p>
            </button>

            <!-- Card Estoque -->
            <button id="btn-estoque" onclick="renderContent('estoque')" class="flex flex-col h-full bg-white shadow-md rounded-xl p-5 transition duration-200 hover:shadow-lg hover:ring-2 hover:ring-yellow-500/70 transform hover:scale-[1.01] text-center card-button">
                <span class="text-3xl mb-1 text-yellow-500">üì¶</span>
                <h5 class="text-lg font-bold">Estoque</h5>
                <p class="text-gray-500 text-xs mt-1">N√≠veis e Reposi√ß√£o</p>
            </button>
        </section>

        <!-- √Årea de Conte√∫do Din√¢mico (Tabelas ou Formul√°rios) -->
        <section id="dynamic-content-area" class="mb-10 p-6 bg-white rounded-xl shadow-lg border border-gray-100 min-h-[400px]">
            <!-- O conte√∫do das tabelas/formul√°rios ser√° injetado aqui pelo JavaScript -->
            <div class="text-center py-10">
                <span class="text-4xl text-gray-300 block mb-4">üëã</span>
                <p class="text-gray-500 text-lg">Selecione uma das categorias acima ou uma A√ß√£o R√°pida para visualizar os dados/formul√°rios.</p>
            </div>
        </section>

        <!-- A√ß√µes R√°pidas (Agora funcionais para carregar formul√°rios) -->
        <section class="mt-8 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 border-b pb-2">‚öôÔ∏è A√ß√µes R√°pidas</h2>
            <div class="flex flex-wrap gap-4 pt-2">
                <button onclick="renderQuickActionForm('addMedicamento')"
                        class="px-5 py-3 border border-primary-pharma text-primary-pharma font-medium rounded-full hover:bg-primary-pharma hover:text-white transition duration-200 shadow-sm hover:shadow-md">
                    ‚ûï Adicionar Medicamento
                </button>
                <button onclick="renderQuickActionForm('registerVenda')"
                        class="px-5 py-3 border border-green-500 text-green-500 font-medium rounded-full hover:bg-green-500 hover:text-white transition duration-200 shadow-sm hover:shadow-md">
                    üßæ Registrar Venda
                </button>
                <button onclick="renderQuickActionForm('updateEstoque')"
                        class="px-5 py-3 border border-yellow-500 text-yellow-500 font-medium rounded-full hover:bg-yellow-500 hover:text-gray-800 transition duration-200 shadow-sm hover:shadow-md">
                    üìä Atualizar Estoque
                </button>
                <button onclick="confirmarLogout()"
                        class="px-5 py-3 border border-red-500 text-red-500 font-medium rounded-full hover:bg-red-500 hover:text-white transition duration-200 shadow-sm hover:shadow-md">
                    üö™ Sair
                </button>
            </div>
        </section>

    </div>

    <!-- Script JavaScript para Funcionalidade, Modal e Conte√∫do Din√¢mico -->
    <script>
        // --- Modal Functions (Custom Alert/Confirm) ---
        function showModal(title, message, isConfirmation = false, onConfirm = null) {
            const modal = document.getElementById('customModal');
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;

            const actionsContainer = document.getElementById('modalActions');
            actionsContainer.innerHTML = ''; 

            if (isConfirmation && onConfirm) {
                const btnCancel = document.createElement('button');
                btnCancel.className = 'px-4 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition duration-150';
                btnCancel.textContent = 'Cancelar';
                btnCancel.onclick = hideModal;

                const btnConfirm = document.createElement('button');
                btnConfirm.className = 'px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition duration-150 shadow-md';
                btnConfirm.textContent = 'Sair';
                btnConfirm.onclick = () => { hideModal(); onConfirm(); };

                actionsContainer.appendChild(btnCancel);
                actionsContainer.appendChild(btnConfirm);

            } else {
                const btnClose = document.createElement('button');
                btnClose.className = 'px-4 py-2 bg-primary-pharma text-white font-medium rounded-lg hover:bg-emerald-700 transition duration-150 shadow-md';
                btnClose.textContent = 'OK';
                btnClose.onclick = hideModal;
                actionsContainer.appendChild(btnClose);
            }

            modal.classList.remove('hidden', 'opacity-0');
            modal.classList.add('flex', 'opacity-100');
            modal.querySelector('div').classList.remove('scale-95');
            modal.querySelector('div').classList.add('scale-100');
        }

        function hideModal() {
            const modal = document.getElementById('customModal');
            modal.classList.add('opacity-0');
            modal.querySelector('div').classList.remove('scale-100');
            modal.querySelector('div').classList.add('scale-95');
            setTimeout(() => modal.classList.remove('flex'), 300);
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        function confirmarLogout() {
            showModal(
                'Confirma√ß√£o de Sa√≠da',
                'Deseja realmente sair do sistema? Isso encerrar√° sua sess√£o.',
                true,
                () => {
                    console.log("Usu√°rio deslogado. Redirecionando...");
                    showModal('Logout Realizado', 'Voc√™ saiu com sucesso! Redirecionando para a tela de login.', false);
                }
            );
        }
        
        // --- Dynamic Content/Table Rendering ---
        
        const MOCK_DATA = {
            medicamentos: [
                { nome: "Paracetamol 500mg", preco: "12.50", estoque: 150, vencimento: "2026-03-15" },
                { nome: "Amoxicilina 875mg", preco: "45.99", estoque: 32, vencimento: "2025-11-01" },
                { nome: "Ibuprofeno 400mg", preco: "8.90", estoque: 210, vencimento: "2027-08-20" },
                { nome: "Losartana 50mg", preco: "22.35", estoque: 85, vencimento: "2026-01-25" },
            ],
            // Atualizado: Removido 'ultima_compra' e Adicionado 'numero_celular'
            clientes: [
                { nome: "Maria Silva", cpf: "123.456.789-00", numero_celular: "(11) 98765-4321", total_compras: "R$ 450,50" },
                { nome: "Jo√£o Pereira", cpf: "987.654.321-11", numero_celular: "(21) 99887-7654", total_compras: "R$ 1.200,99" },
                { nome: "Ana Costa", cpf: "111.222.333-44", numero_celular: "(41) 97654-1234", total_compras: "R$ 88,00" },
            ],
            // Atualizado: Removido 'data' e Adicionado 'quantidade'
            vendas: [
                { id: "VEN001", quantidade: 3, valor: "R$ 68,49", cliente: "Ana Costa" },
                { id: "VEN002", quantidade: 1, valor: "R$ 150,00", cliente: "Maria Silva" },
                { id: "VEN003", quantidade: 5, valor: "R$ 29,90", cliente: "Jo√£o Pereira" },
            ],
            // Atualizado: Renomeado 'nivel' para 'quantidade'
            estoque: [
                { produto: "Paracetamol 500mg", quantidade: "150", status: "OK" },
                { produto: "Amoxicilina 875mg", quantidade: "32", status: "BAIXO" },
                { produto: "Ibuprofeno 400mg", quantidade: "210", status: "OK" },
                { produto: "Losartana 50mg", quantidade: "85", status: "MEDIO" },
            ]
        };

        // Fun√ß√£o para simular o envio do formul√°rio e mostrar um modal de sucesso
        function handleFormSubmission(formTitle) {
            showModal(
                'Sucesso!',
                `${formTitle} conclu√≠do com sucesso. Os dados seriam persistidos em um banco de dados real.`,
                false
            );
             // Opcional: recarrega a tela de Medicamentos ap√≥s o envio
             // renderContent('medicamentos');
        }

        // Fun√ß√£o para gerar o HTML dos formul√°rios de A√ß√µes R√°pidas
        function generateFormHTML(actionType) {
            let title = '';
            let formHtml = '';
            
            switch(actionType) {
                case 'addMedicamento':
                    title = 'Adicionar Novo Medicamento';
                    formHtml = `
                        <form class="space-y-4">
                            <div>
                                <label for="nome" class="block text-sm font-medium text-gray-700">Nome do Medicamento</label>
                                <input type="text" id="nome" placeholder="Ex: Paracetamol 500mg" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary-pharma focus:border-primary-pharma p-3 border">
                            </div>
                            <div>
                                <label for="preco" class="block text-sm font-medium text-gray-700">Pre√ßo (R$)</label>
                                <input type="number" step="0.01" id="preco" placeholder="Ex: 12.50" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary-pharma focus:border-primary-pharma p-3 border">
                            </div>
                            <div>
                                <label for="estoque" class="block text-sm font-medium text-gray-700">Quantidade em Estoque</label>
                                <input type="number" id="estoque" placeholder="Ex: 150" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary-pharma focus:border-primary-pharma p-3 border">
                            </div>
                            <button type="button" onclick="handleFormSubmission('${title}')" class="w-full py-3 px-4 bg-primary-pharma text-white font-semibold rounded-lg hover:bg-emerald-600 transition duration-150 shadow-md">
                                Salvar Medicamento
                            </button>
                        </form>
                    `;
                    break;
                case 'registerVenda':
                    title = 'Registrar Nova Venda';
                    formHtml = `
                        <form class="space-y-4">
                            <div>
                                <label for="cliente" class="block text-sm font-medium text-gray-700">Cliente (Nome ou CPF)</label>
                                <input type="text" id="cliente" placeholder="Ex: Maria Silva" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 p-3 border">
                            </div>
                            <div>
                                <label for="produto" class="block text-sm font-medium text-gray-700">Produto Vendido</label>
                                <select id="produto" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 p-3 border">
                                    <option value="">Selecione um medicamento</option>
                                    <option value="para">Paracetamol 500mg</option>
                                    <option value="amo">Amoxicilina 875mg</option>
                                </select>
                            </div>
                            <div>
                                <label for="quantidadeVenda" class="block text-sm font-medium text-gray-700">Quantidade</label>
                                <input type="number" id="quantidadeVenda" placeholder="Ex: 3" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 p-3 border">
                            </div>
                            <div>
                                <label for="valorVenda" class="block text-sm font-medium text-gray-700">Valor Total (R$)</label>
                                <input type="number" step="0.01" id="valorVenda" placeholder="Ex: 68.49" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500 p-3 border">
                            </div>
                            <button type="button" onclick="handleFormSubmission('${title}')" class="w-full py-3 px-4 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition duration-150 shadow-md">
                                Concluir Venda
                            </button>
                        </form>
                    `;
                    break;
                case 'updateEstoque':
                    title = 'Atualizar Quantidade de Estoque';
                    formHtml = `
                        <form class="space-y-4">
                            <div>
                                <label for="estoqueProduto" class="block text-sm font-medium text-gray-700">Produto para Atualizar</label>
                                <select id="estoqueProduto" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-yellow-500 focus:border-yellow-500 p-3 border">
                                    <option value="">Selecione um medicamento</option>
                                    <option value="para">Paracetamol 500mg (150)</option>
                                    <option value="amo">Amoxicilina 875mg (32)</option>
                                </select>
                            </div>
                            <div>
                                <label for="novoNivel" class="block text-sm font-medium text-gray-700">Nova Quantidade em Estoque</label>
                                <input type="number" id="novoNivel" placeholder="Ex: 200" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-yellow-500 focus:border-yellow-500 p-3 border">
                            </div>
                            <div>
                                <label for="tipoAjuste" class="block text-sm font-medium text-gray-700">Tipo de Ajuste</label>
                                <select id="tipoAjuste" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-yellow-500 focus:border-yellow-500 p-3 border">
                                    <option>Ajuste F√≠sico</option>
                                    <option>Recebimento</option>
                                </select>
                            </div>
                            <button type="button" onclick="handleFormSubmission('${title}')" class="w-full py-3 px-4 bg-yellow-500 text-gray-800 font-semibold rounded-lg hover:bg-yellow-600 transition duration-150 shadow-md">
                                Salvar Ajuste
                            </button>
                        </form>
                    `;
                    break;
                default:
                    return '';
            }

            return `
                <h2 class="text-2xl font-bold mb-6 text-secondary-pharma">${title}</h2>
                <div class="max-w-md mx-auto p-6 bg-gray-50 rounded-xl border border-gray-200">
                    ${formHtml}
                </div>
            `;
        }

        // Fun√ß√£o para renderizar o formul√°rio de A√ß√£o R√°pida
        function renderQuickActionForm(actionType) {
             // Limpar o estado ativo dos bot√µes principais
            document.querySelectorAll('.card-button').forEach(btn => {
                btn.classList.remove('ring-primary-pharma', 'ring-2');
            });
            
            const area = document.getElementById('dynamic-content-area');
            area.innerHTML = generateFormHTML(actionType);
        }

        function generateTableHTML(title, headers, data, type) {
            let rows = data.map(item => {
                let statusClass = '';
                if (type === 'estoque') {
                    // O status √© o 3¬∫ valor no array (ap√≥s produto e quantidade)
                    const itemValues = Object.values(item);
                    const statusValue = itemValues[2]; 

                    if (statusValue === 'BAIXO') statusClass = 'bg-red-100 text-red-700 font-medium';
                    else if (statusValue === 'MEDIO') statusClass = 'bg-yellow-100 text-yellow-700 font-medium';
                    else statusClass = 'bg-green-100 text-green-700 font-medium';
                }
                
                // Mapeia os valores do objeto para as c√©lulas da linha
                const cells = Object.values(item).map((value, index) => {
                    let cellClasses = 'p-4 whitespace-nowrap text-sm text-gray-700';
                    
                    // Aplica a classe apenas na c√©lula do Status (que √© o 3¬∫ item, index 2, se n√£o for medicamentos/clientes)
                    if (type === 'estoque' && index === 2) { 
                        cellClasses += ` ${statusClass} rounded-full text-center`;
                    }
                    
                    return `<td class="${cellClasses}">${value}</td>`;
                }).join('');
                return `<tr class="border-b hover:bg-gray-50 transition duration-100">${cells}</tr>`;
            }).join('');

            const headerCells = headers.map(header => 
                `<th scope="col" class="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">${header}</th>`
            ).join('');

            return `
                <h2 class="text-2xl font-bold mb-6">${title}</h2>
                <div class="overflow-x-auto bg-white rounded-lg shadow">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>${headerCells}</tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            ${rows}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function renderContent(section) {
            const area = document.getElementById('dynamic-content-area');
            let htmlContent = '';
            
            // 1. Resetar estilos dos bot√µes
            document.querySelectorAll('.card-button').forEach(btn => {
                btn.classList.remove('ring-primary-pharma', 'ring-2', 'ring-accent-blue', 'ring-green-500', 'ring-yellow-500');
            });
            
            // 2. Aplicar estilo ao bot√£o ativo
            const activeButton = document.getElementById(`btn-${section}`);
            if (activeButton) {
                // Adiciona o anel de cor de acordo com a se√ß√£o para um melhor feedback visual
                let ringColor = 'ring-primary-pharma'; // default para medicamentos
                if (section === 'clientes') ringColor = 'ring-accent-blue';
                else if (section === 'vendas') ringColor = 'ring-green-500';
                else if (section === 'estoque') ringColor = 'ring-yellow-500';

                activeButton.classList.add(ringColor, 'ring-2');
            }

            // 3. Gerar o HTML da tabela
            switch (section) {
                case 'medicamentos':
                    htmlContent = generateTableHTML(
                        'Tabela de Medicamentos',
                        ['Nome', 'Pre√ßo (R$)', 'Estoque', 'Vencimento'],
                        MOCK_DATA.medicamentos,
                        'medicamentos'
                    );
                    break;
                case 'clientes':
                    htmlContent = generateTableHTML(
                        'Tabela de Clientes',
                        // Headers Atualizados
                        ['Nome', 'CPF', 'Celular', 'Total Compras'],
                        MOCK_DATA.clientes,
                        'clientes'
                    );
                    break;
                case 'vendas':
                    htmlContent = generateTableHTML(
                        'Tabela de Vendas',
                        // Headers Atualizados
                        ['ID', 'Quantidade', 'Valor (R$)', 'Cliente'],
                        MOCK_DATA.vendas,
                        'vendas'
                    );
                    break;
                case 'estoque':
                    htmlContent = generateTableHTML(
                        'Tabela de Estoque',
                        // Headers Atualizados
                        ['Produto', 'Quantidade', 'Status', 'Data Vencimento (Mock)'],
                        // Mesclando dados de estoque com a data de vencimento
                        MOCK_DATA.estoque.map((item, index) => ({
                            ...item,
                            vencimento: MOCK_DATA.medicamentos[index] ? MOCK_DATA.medicamentos[index].vencimento : 'N/A'
                        })),
                        'estoque'
                    );
                    break;
                default:
                    htmlContent = '<div class="text-center py-10"><p class="text-red-500 text-lg">Se√ß√£o n√£o encontrada.</p></div>';
            }

            area.innerHTML = htmlContent;
        }

        // Carregar a primeira se√ß√£o ao iniciar
        window.onload = () => {
             renderContent('medicamentos');
        };
    </script>
</body>
</html>
